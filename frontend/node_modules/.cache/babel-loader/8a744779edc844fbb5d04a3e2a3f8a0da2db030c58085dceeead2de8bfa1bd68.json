{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,useParams,useNavigate,useLocation}from'react-router-dom';import{createProduct,deleteProduct,listProducts}from'../actions/productActions';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{PRODUCT_CREATE_RESET,PRODUCT_DELETE_RESET}from'../constants/productConstants';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProductListScreen(props){const navigate=useNavigate();const{pageNumber=1}=useParams();const{pathname}=useLocation();const sellerMode=pathname.indexOf('/seller')>=0;const productList=useSelector(state=>state.productList);const{loading,error,products,page,pages}=productList;const productCreate=useSelector(state=>state.productCreate);const{loading:loadingCreate,error:errorCreate,success:successCreate,product:createdProduct}=productCreate;const productDelete=useSelector(state=>state.productDelete);const{loading:loadingDelete,error:errorDelete,success:successDelete}=productDelete;const userSignin=useSelector(state=>state.userSignin);const{userInfo}=userSignin;const dispatch=useDispatch();useEffect(()=>{if(successCreate){dispatch({type:PRODUCT_CREATE_RESET});navigate(\"/product/\".concat(createdProduct._id,\"/edit\"));}if(successDelete){dispatch({type:PRODUCT_DELETE_RESET});}dispatch(listProducts({seller:sellerMode?userInfo._id:'',pageNumber}));},[createdProduct,dispatch,navigate,sellerMode,successCreate,successDelete,userInfo._id,pageNumber]);const deleteHandler=product=>{if(window.confirm('Are you sure to delete?')){dispatch(deleteProduct(product._id));}};const createHandler=()=>{dispatch(createProduct());};return/*#__PURE__*/_jsxs(\"div\",{className:\"allcomponents\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Products\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"primary\",onClick:createHandler,children:\"Create Product\"})]}),loadingDelete&&/*#__PURE__*/_jsx(LoadingBox,{}),errorDelete&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(LoadingBox,{}),errorCreate&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"BRAND\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ACTIONS\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20AC\",product.price]}),/*#__PURE__*/_jsx(\"td\",{children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.brand}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:()=>navigate(\"/product/\".concat(product._id,\"/edit\")),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:()=>deleteHandler(product),children:\"Delete\"})]})]},product._id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row center pagination\",children:[...Array(pages).keys()].map(x=>/*#__PURE__*/_jsx(Link,{className:x+1===page?'active':'',to:\"/productlist/pageNumber/\".concat(x+1),children:x+1},x+1))})]})]});}","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Link","useParams","useNavigate","useLocation","createProduct","deleteProduct","listProducts","LoadingBox","MessageBox","PRODUCT_CREATE_RESET","PRODUCT_DELETE_RESET","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductListScreen","props","navigate","pageNumber","pathname","sellerMode","indexOf","productList","state","loading","error","products","page","pages","productCreate","loadingCreate","errorCreate","success","successCreate","product","createdProduct","productDelete","loadingDelete","errorDelete","successDelete","userSignin","userInfo","dispatch","type","concat","_id","seller","deleteHandler","window","confirm","createHandler","className","children","onClick","variant","map","name","price","category","brand","Array","keys","x","to"],"sources":["D:/projects/e-store-redux-mern/frontend/src/screens/ProductListScreen.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link, useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport {\r\n  createProduct,\r\n  deleteProduct,\r\n  listProducts,\r\n} from '../actions/productActions';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\nimport {\r\n  PRODUCT_CREATE_RESET,\r\n  PRODUCT_DELETE_RESET,\r\n} from '../constants/productConstants';\r\n\r\nexport default function ProductListScreen(props) {\r\n  const navigate = useNavigate();\r\n  const { pageNumber = 1 } = useParams();\r\n  const { pathname } = useLocation();\r\n  const sellerMode = pathname.indexOf('/seller') >= 0;\r\n  const productList = useSelector((state) => state.productList);\r\n  const { loading, error, products, page, pages } = productList;\r\n\r\n  const productCreate = useSelector((state) => state.productCreate);\r\n  const {\r\n    loading: loadingCreate,\r\n    error: errorCreate,\r\n    success: successCreate,\r\n    product: createdProduct,\r\n  } = productCreate;\r\n\r\n  const productDelete = useSelector((state) => state.productDelete);\r\n  const {\r\n    loading: loadingDelete,\r\n    error: errorDelete,\r\n    success: successDelete,\r\n  } = productDelete;\r\n  const userSignin = useSelector((state) => state.userSignin);\r\n  const { userInfo } = userSignin;\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    if (successCreate) {\r\n      dispatch({ type: PRODUCT_CREATE_RESET });\r\n      navigate(`/product/${createdProduct._id}/edit`);\r\n    }\r\n    if (successDelete) {\r\n      dispatch({ type: PRODUCT_DELETE_RESET });\r\n    }\r\n    dispatch(\r\n      listProducts({ seller: sellerMode ? userInfo._id : '', pageNumber })\r\n    );\r\n  }, [\r\n    createdProduct,\r\n    dispatch,\r\n    navigate,\r\n    sellerMode,\r\n    successCreate,\r\n    successDelete,\r\n    userInfo._id,\r\n    pageNumber,\r\n  ]);\r\n\r\n  const deleteHandler = (product) => {\r\n    if (window.confirm('Are you sure to delete?')) {\r\n      dispatch(deleteProduct(product._id));\r\n    }\r\n  };\r\n  const createHandler = () => {\r\n    dispatch(createProduct());\r\n  };\r\n  return (\r\n    <div className='allcomponents'>\r\n      <div className=\"row\">\r\n        <h1>Products</h1>\r\n        <button type=\"button\" className=\"primary\" onClick={createHandler}>\r\n          Create Product\r\n        </button>\r\n      </div>\r\n\r\n      {loadingDelete && <LoadingBox></LoadingBox>}\r\n      {errorDelete && <MessageBox variant=\"danger\">{errorDelete}</MessageBox>}\r\n\r\n      {loadingCreate && <LoadingBox></LoadingBox>}\r\n      {errorCreate && <MessageBox variant=\"danger\">{errorCreate}</MessageBox>}\r\n      {loading ? (\r\n        <LoadingBox></LoadingBox>\r\n      ) : error ? (\r\n        <MessageBox variant=\"danger\">{error}</MessageBox>\r\n      ) : (\r\n        <>\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>NAME</th>\r\n                <th>PRICE</th>\r\n                <th>CATEGORY</th>\r\n                <th>BRAND</th>\r\n                <th>ACTIONS</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {products.map((product) => (\r\n                <tr key={product._id}>\r\n                  <td>{product._id}</td>\r\n                  <td>{product.name}</td>\r\n                  <td>â‚¬{product.price}</td>\r\n                  <td>{product.category}</td>\r\n                  <td>{product.brand}</td>\r\n                  <td>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"small\"\r\n                      onClick={() => navigate(`/product/${product._id}/edit`)}\r\n                    >\r\n                      Edit\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"small\"\r\n                      onClick={() => deleteHandler(product)}\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          <div className=\"row center pagination\">\r\n            {[...Array(pages).keys()].map((x) => (\r\n              <Link\r\n                className={x + 1 === page ? 'active' : ''}\r\n                key={x + 1}\r\n                to={`/productlist/pageNumber/${x + 1}`}\r\n              >\r\n                {x + 1}\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}