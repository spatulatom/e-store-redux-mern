{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,useNavigate,useParams,useLocation}from'react-router-dom';import{addToCart,removeFromCart}from'../actions/cartActions';import MessageBox from'../components/MessageBox';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(props){const navigate=useNavigate();const params=useParams();const{id:productId}=params;const{search}=useLocation();const qtyInUrl=new URLSearchParams(search).get('qty');const qty=qtyInUrl?Number(qtyInUrl):1;const cart=useSelector(state=>state.cart);const{cartItems,error}=cart;const dispatch=useDispatch();useEffect(()=>{if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);const removeFromCartHandler=id=>{// delete action\ndispatch(removeFromCart(id));};const checkoutHandler=()=>{navigate('/signin?redirect=/shipping');};return/*#__PURE__*/_jsxs(\"div\",{className:\"row top allcomponents shopping-cart\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-2\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),error&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}),cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Shopping\"})]}):/*#__PURE__*/_jsx(\"ul\",{children:cartItems.map(item=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"small\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"min-30\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"select\",{value:item.qty,onChange:e=>dispatch(addToCart(item.product,Number(e.target.value))),children:[...Array(item.countInStock).keys()].map(x=>/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1))})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u20AC\",item.price]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeFromCartHandler(item.product),children:\"Delete\"})})]})},item.product))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-body\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce((a,c)=>a+c.qty,0),\" items) : \\u20AC\",cartItems.reduce((a,c)=>a+c.price*c.qty,0)]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:checkoutHandler,className:\"primary block\",disabled:cartItems.length===0,children:\"Proceed to Checkout\"})})]})})})]});}","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Link","useNavigate","useParams","useLocation","addToCart","removeFromCart","MessageBox","jsx","_jsx","jsxs","_jsxs","CartScreen","props","navigate","params","id","productId","search","qtyInUrl","URLSearchParams","get","qty","Number","cart","state","cartItems","error","dispatch","removeFromCartHandler","checkoutHandler","className","children","variant","length","to","map","item","src","image","alt","name","concat","product","value","onChange","e","target","Array","countInStock","keys","x","price","type","onClick","reduce","a","c","disabled"],"sources":["D:/projects/e-store-redux-mern/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link, useNavigate, useParams, useLocation } from 'react-router-dom';\r\nimport { addToCart, removeFromCart } from '../actions/cartActions';\r\nimport MessageBox from '../components/MessageBox';\r\n\r\nexport default function CartScreen(props) {\r\n  const navigate = useNavigate();\r\n  const params = useParams();\r\n  const { id: productId } = params;\r\n\r\n  const { search } = useLocation();\r\n  const qtyInUrl = new URLSearchParams(search).get('qty');\r\n  const qty = qtyInUrl ? Number(qtyInUrl) : 1;\r\n\r\n  const cart = useSelector((state) => state.cart);\r\n  const { cartItems, error } = cart;\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    if (productId) {\r\n      dispatch(addToCart(productId, qty));\r\n    }\r\n  }, [dispatch, productId, qty]);\r\n\r\n  const removeFromCartHandler = (id) => {\r\n    // delete action\r\n    dispatch(removeFromCart(id));\r\n  };\r\n\r\n  const checkoutHandler = () => {\r\n    navigate('/signin?redirect=/shipping');\r\n  };\r\n  return (\r\n    <div className=\"row top allcomponents shopping-cart\">\r\n      <div className=\"col-2\">\r\n        <h1>Shopping Cart</h1>\r\n        {error && <MessageBox variant=\"danger\">{error}</MessageBox>}\r\n        {cartItems.length === 0 ? (\r\n          <MessageBox>\r\n            Cart is empty. <Link to=\"/\">Go Shopping</Link>\r\n          </MessageBox>\r\n        ) : (\r\n          <ul>\r\n            {cartItems.map((item) => (\r\n              <li key={item.product}>\r\n                <div className=\"row\">\r\n                  <div>\r\n                    <img\r\n                      src={item.image}\r\n                      alt={item.name}\r\n                      className=\"small\"\r\n                    ></img>\r\n                  </div>\r\n                  <div className=\"min-30\">\r\n                    <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                  </div>\r\n                  <div>\r\n                    <select\r\n                      value={item.qty}\r\n                      onChange={(e) =>\r\n                        dispatch(\r\n                          addToCart(item.product, Number(e.target.value))\r\n                        )\r\n                      }\r\n                    >\r\n                      {[...Array(item.countInStock).keys()].map((x) => (\r\n                        <option key={x + 1} value={x + 1}>\r\n                          {x + 1}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  <div>€{item.price}</div>\r\n                  <div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => removeFromCartHandler(item.product)}\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n      <div className=\"col-1\">\r\n        <div className=\"card card-body\">\r\n          <ul>\r\n            <li>\r\n              <h2>\r\n                Subtotal ({cartItems.reduce((a, c) => a + c.qty, 0)} items) : €\r\n                {cartItems.reduce((a, c) => a + c.price * c.qty, 0)}\r\n              </h2>\r\n            </li>\r\n            <li>\r\n              <button\r\n                type=\"button\"\r\n                onClick={checkoutHandler}\r\n                className=\"primary block\"\r\n                disabled={cartItems.length === 0}\r\n              >\r\n                Proceed to Checkout\r\n              </button>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}