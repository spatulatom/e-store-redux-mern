{"ast":null,"code":"import _objectSpread from\"D:/projects/e-store-redux-mern/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,useNavigate}from'react-router-dom';import{createOrder}from'../actions/orderActions';import CheckoutSteps from'../components/CheckoutSteps';import{ORDER_CREATE_RESET}from'../constants/orderConstants';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PlaceOrderScreen(props){const navigate=useNavigate();const cart=useSelector(state=>state.cart);if(!cart.paymentMethod){navigate('/payment');}const orderCreate=useSelector(state=>state.orderCreate);const{loading,success,error,order}=orderCreate;const toPrice=num=>Number(num.toFixed(2));// 5.123 => \"5.12\" => 5.12\ncart.itemsPrice=toPrice(cart.cartItems.reduce((a,c)=>a+c.qty*c.price,0));cart.shippingPrice=cart.itemsPrice>100?toPrice(0):toPrice(10);cart.taxPrice=toPrice(0.15*cart.itemsPrice);cart.totalPrice=cart.itemsPrice+cart.shippingPrice+cart.taxPrice;const dispatch=useDispatch();const placeOrderHandler=()=>{dispatch(createOrder(_objectSpread(_objectSpread({},cart),{},{orderItems:cart.cartItems})));};useEffect(()=>{if(success){navigate(\"/order/\".concat(order._id));dispatch({type:ORDER_CREATE_RESET});}},[dispatch,order,navigate,success]);return/*#__PURE__*/_jsxs(\"div\",{className:\"allcomponents\",children:[/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"row top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",cart.shippingAddress.fullName,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Address: \"}),\" \",cart.shippingAddress.address,\",\",cart.shippingAddress.city,\", \",cart.shippingAddress.postalCode,\",\",cart.shippingAddress.country]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method:\"}),\" \",cart.paymentMethod]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order Items\"}),/*#__PURE__*/_jsx(\"ul\",{children:cart.cartItems.map(item=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"small\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"min-30\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(\"div\",{children:[item.qty,\" x $\",item.price,\" = $\",item.qty*item.price]})]})},item.product))})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-body\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Items\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",cart.itemsPrice.toFixed(2)]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",cart.shippingPrice.toFixed(2)]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Tax\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",cart.taxPrice.toFixed(2)]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\" Order Total\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"$\",cart.totalPrice.toFixed(2)]})})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:placeOrderHandler,className:\"primary block\",disabled:cart.cartItems.length===0,children:\"Place Order\"})}),loading&&/*#__PURE__*/_jsx(LoadingBox,{}),error&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error})]})})})]})]});}","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Link","useNavigate","createOrder","CheckoutSteps","ORDER_CREATE_RESET","LoadingBox","MessageBox","jsx","_jsx","jsxs","_jsxs","PlaceOrderScreen","props","navigate","cart","state","paymentMethod","orderCreate","loading","success","error","order","toPrice","num","Number","toFixed","itemsPrice","cartItems","reduce","a","c","qty","price","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","_objectSpread","orderItems","concat","_id","type","className","children","step1","step2","step3","step4","shippingAddress","fullName","address","city","postalCode","country","map","item","src","image","alt","name","to","product","onClick","disabled","length","variant"],"sources":["D:/projects/e-store-redux-mern/frontend/src/screens/PlaceOrderScreen.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { createOrder } from '../actions/orderActions';\r\nimport CheckoutSteps from '../components/CheckoutSteps';\r\nimport { ORDER_CREATE_RESET } from '../constants/orderConstants';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\n\r\nexport default function PlaceOrderScreen(props) {\r\n  const navigate = useNavigate();\r\n  const cart = useSelector((state) => state.cart);\r\n  if (!cart.paymentMethod) {\r\n    navigate('/payment');\r\n  }\r\n  const orderCreate = useSelector((state) => state.orderCreate);\r\n  const { loading, success, error, order } = orderCreate;\r\n  const toPrice = (num) => Number(num.toFixed(2)); // 5.123 => \"5.12\" => 5.12\r\n  cart.itemsPrice = toPrice(\r\n    cart.cartItems.reduce((a, c) => a + c.qty * c.price, 0)\r\n  );\r\n  cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0) : toPrice(10);\r\n  cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\r\n  cart.totalPrice = cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\r\n  const dispatch = useDispatch();\r\n  const placeOrderHandler = () => {\r\n    dispatch(createOrder({ ...cart, orderItems: cart.cartItems }));\r\n  };\r\n  useEffect(() => {\r\n    if (success) {\r\n      navigate(`/order/${order._id}`);\r\n      dispatch({ type: ORDER_CREATE_RESET });\r\n    }\r\n  }, [dispatch, order, navigate, success]);\r\n  return (\r\n    <div className='allcomponents'>\r\n      <CheckoutSteps step1 step2 step3 step4></CheckoutSteps>\r\n      <div className=\"row top\">\r\n        <div className=\"col-2\">\r\n          <ul>\r\n            <li>\r\n              <div className=\"card card-body\">\r\n                <h2>Shipping</h2>\r\n                <p>\r\n                  <strong>Name:</strong> {cart.shippingAddress.fullName} <br />\r\n                  <strong>Address: </strong> {cart.shippingAddress.address},\r\n                  {cart.shippingAddress.city}, {cart.shippingAddress.postalCode}\r\n                  ,{cart.shippingAddress.country}\r\n                </p>\r\n              </div>\r\n            </li>\r\n            <li>\r\n              <div className=\"card card-body\">\r\n                <h2>Payment</h2>\r\n                <p>\r\n                  <strong>Method:</strong> {cart.paymentMethod}\r\n                </p>\r\n              </div>\r\n            </li>\r\n            <li>\r\n              <div className=\"card card-body\">\r\n                <h2>Order Items</h2>\r\n                <ul>\r\n                  {cart.cartItems.map((item) => (\r\n                    <li key={item.product}>\r\n                      <div className=\"row\">\r\n                        <div>\r\n                          <img\r\n                            src={item.image}\r\n                            alt={item.name}\r\n                            className=\"small\"\r\n                          ></img>\r\n                        </div>\r\n                        <div className=\"min-30\">\r\n                          <Link to={`/product/${item.product}`}>\r\n                            {item.name}\r\n                          </Link>\r\n                        </div>\r\n\r\n                        <div>\r\n                          {item.qty} x ${item.price} = ${item.qty * item.price}\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div className=\"col-1\">\r\n          <div className=\"card card-body\">\r\n            <ul>\r\n              <li>\r\n                <h2>Order Summary</h2>\r\n              </li>\r\n              <li>\r\n                <div className=\"row\">\r\n                  <div>Items</div>\r\n                  <div>${cart.itemsPrice.toFixed(2)}</div>\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <div className=\"row\">\r\n                  <div>Shipping</div>\r\n                  <div>${cart.shippingPrice.toFixed(2)}</div>\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <div className=\"row\">\r\n                  <div>Tax</div>\r\n                  <div>${cart.taxPrice.toFixed(2)}</div>\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <div className=\"row\">\r\n                  <div>\r\n                    <strong> Order Total</strong>\r\n                  </div>\r\n                  <div>\r\n                    <strong>${cart.totalPrice.toFixed(2)}</strong>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={placeOrderHandler}\r\n                  className=\"primary block\"\r\n                  disabled={cart.cartItems.length === 0}\r\n                >\r\n                  Place Order\r\n                </button>\r\n              </li>\r\n              {loading && <LoadingBox></LoadingBox>}\r\n              {error && <MessageBox variant=\"danger\">{error}</MessageBox>}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}