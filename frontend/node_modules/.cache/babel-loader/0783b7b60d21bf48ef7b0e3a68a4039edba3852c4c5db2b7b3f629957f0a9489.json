{"ast":null,"code":"import Axios from'axios';import{CART_ADD_ITEM,CART_REMOVE_ITEM,CART_SAVE_SHIPPING_ADDRESS,CART_SAVE_PAYMENT_METHOD,CART_ADD_ITEM_FAIL}from'../constants/cartConstants';export const addToCart=(productId,qty)=>async(dispatch,getState)=>{const{data}=await Axios.get(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/products/\").concat(productId));const{cart:{cartItems}}=getState();if(cartItems.length>0&&data.seller._id!==cartItems[0].seller._id){dispatch({type:CART_ADD_ITEM_FAIL,payload:\"Can't Add To Cart. Buy only from \".concat(cartItems[0].seller.seller.name,\" in this order\")});}else{dispatch({type:CART_ADD_ITEM,payload:{name:data.name,image:data.image,price:data.price,countInStock:data.countInStock,product:data._id,seller:data.seller,qty}});localStorage.setItem('cartItems',JSON.stringify(getState().cart.cartItems));}};export const removeFromCart=productId=>(dispatch,getState)=>{dispatch({type:CART_REMOVE_ITEM,payload:productId});localStorage.setItem('cartItems',JSON.stringify(getState().cart.cartItems));};export const saveShippingAddress=data=>dispatch=>{dispatch({type:CART_SAVE_SHIPPING_ADDRESS,payload:data});localStorage.setItem('shippingAddress',JSON.stringify(data));};export const savePaymentMethod=data=>dispatch=>{dispatch({type:CART_SAVE_PAYMENT_METHOD,payload:data});};","map":{"version":3,"names":["Axios","CART_ADD_ITEM","CART_REMOVE_ITEM","CART_SAVE_SHIPPING_ADDRESS","CART_SAVE_PAYMENT_METHOD","CART_ADD_ITEM_FAIL","addToCart","productId","qty","dispatch","getState","data","get","concat","process","env","REACT_APP_BACKEND_URL","cart","cartItems","length","seller","_id","type","payload","name","image","price","countInStock","product","localStorage","setItem","JSON","stringify","removeFromCart","saveShippingAddress","savePaymentMethod"],"sources":["D:/projects/e-store-redux-mern/frontend/src/actions/cartActions.js"],"sourcesContent":["import Axios from 'axios';\r\nimport {\r\n  CART_ADD_ITEM,\r\n  CART_REMOVE_ITEM,\r\n  CART_SAVE_SHIPPING_ADDRESS,\r\n  CART_SAVE_PAYMENT_METHOD,\r\n  CART_ADD_ITEM_FAIL,\r\n} from '../constants/cartConstants';\r\n\r\nexport const addToCart = (productId, qty) => async (dispatch, getState) => {\r\n  const { data } = await Axios.get(`${process.env.REACT_APP_BACKEND_URL}/products/${productId}`);\r\n  const {\r\n    cart: { cartItems },\r\n  } = getState();\r\n  if (cartItems.length > 0 && data.seller._id !== cartItems[0].seller._id) {\r\n    dispatch({\r\n      type: CART_ADD_ITEM_FAIL,\r\n      payload: `Can't Add To Cart. Buy only from ${cartItems[0].seller.seller.name} in this order`,\r\n    });\r\n  } else {\r\n    dispatch({\r\n      type: CART_ADD_ITEM,\r\n      payload: {\r\n        name: data.name,\r\n        image: data.image,\r\n        price: data.price,\r\n        countInStock: data.countInStock,\r\n        product: data._id,\r\n        seller: data.seller,\r\n        qty,\r\n      },\r\n    });\r\n    localStorage.setItem(\r\n      'cartItems',\r\n      JSON.stringify(getState().cart.cartItems)\r\n    );\r\n  }\r\n};\r\n\r\nexport const removeFromCart = (productId) => (dispatch, getState) => {\r\n  dispatch({ type: CART_REMOVE_ITEM, payload: productId });\r\n  localStorage.setItem('cartItems', JSON.stringify(getState().cart.cartItems));\r\n};\r\n\r\nexport const saveShippingAddress = (data) => (dispatch) => {\r\n  dispatch({ type: CART_SAVE_SHIPPING_ADDRESS, payload: data });\r\n  localStorage.setItem('shippingAddress', JSON.stringify(data));\r\n};\r\nexport const savePaymentMethod = (data) => (dispatch) => {\r\n  dispatch({ type: CART_SAVE_PAYMENT_METHOD, payload: data });\r\n};\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OACEC,aAAa,CACbC,gBAAgB,CAChBC,0BAA0B,CAC1BC,wBAAwB,CACxBC,kBAAkB,KACb,4BAA4B,CAEnC,MAAO,MAAM,CAAAC,SAAS,CAAGA,CAACC,SAAS,CAAEC,GAAG,GAAK,MAAOC,QAAQ,CAAEC,QAAQ,GAAK,CACzE,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAAX,KAAK,CAACY,GAAG,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,qBAAqB,eAAAH,MAAA,CAAaN,SAAS,CAAE,CAAC,CAC9F,KAAM,CACJU,IAAI,CAAE,CAAEC,SAAU,CACpB,CAAC,CAAGR,QAAQ,CAAC,CAAC,CACd,GAAIQ,SAAS,CAACC,MAAM,CAAG,CAAC,EAAIR,IAAI,CAACS,MAAM,CAACC,GAAG,GAAKH,SAAS,CAAC,CAAC,CAAC,CAACE,MAAM,CAACC,GAAG,CAAE,CACvEZ,QAAQ,CAAC,CACPa,IAAI,CAAEjB,kBAAkB,CACxBkB,OAAO,qCAAAV,MAAA,CAAsCK,SAAS,CAAC,CAAC,CAAC,CAACE,MAAM,CAACA,MAAM,CAACI,IAAI,kBAC9E,CAAC,CAAC,CACJ,CAAC,IAAM,CACLf,QAAQ,CAAC,CACPa,IAAI,CAAErB,aAAa,CACnBsB,OAAO,CAAE,CACPC,IAAI,CAAEb,IAAI,CAACa,IAAI,CACfC,KAAK,CAAEd,IAAI,CAACc,KAAK,CACjBC,KAAK,CAAEf,IAAI,CAACe,KAAK,CACjBC,YAAY,CAAEhB,IAAI,CAACgB,YAAY,CAC/BC,OAAO,CAAEjB,IAAI,CAACU,GAAG,CACjBD,MAAM,CAAET,IAAI,CAACS,MAAM,CACnBZ,GACF,CACF,CAAC,CAAC,CACFqB,YAAY,CAACC,OAAO,CAClB,WAAW,CACXC,IAAI,CAACC,SAAS,CAACtB,QAAQ,CAAC,CAAC,CAACO,IAAI,CAACC,SAAS,CAC1C,CAAC,CACH,CACF,CAAC,CAED,MAAO,MAAM,CAAAe,cAAc,CAAI1B,SAAS,EAAK,CAACE,QAAQ,CAAEC,QAAQ,GAAK,CACnED,QAAQ,CAAC,CAAEa,IAAI,CAAEpB,gBAAgB,CAAEqB,OAAO,CAAEhB,SAAU,CAAC,CAAC,CACxDsB,YAAY,CAACC,OAAO,CAAC,WAAW,CAAEC,IAAI,CAACC,SAAS,CAACtB,QAAQ,CAAC,CAAC,CAACO,IAAI,CAACC,SAAS,CAAC,CAAC,CAC9E,CAAC,CAED,MAAO,MAAM,CAAAgB,mBAAmB,CAAIvB,IAAI,EAAMF,QAAQ,EAAK,CACzDA,QAAQ,CAAC,CAAEa,IAAI,CAAEnB,0BAA0B,CAAEoB,OAAO,CAAEZ,IAAK,CAAC,CAAC,CAC7DkB,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAEC,IAAI,CAACC,SAAS,CAACrB,IAAI,CAAC,CAAC,CAC/D,CAAC,CACD,MAAO,MAAM,CAAAwB,iBAAiB,CAAIxB,IAAI,EAAMF,QAAQ,EAAK,CACvDA,QAAQ,CAAC,CAAEa,IAAI,CAAElB,wBAAwB,CAAEmB,OAAO,CAAEZ,IAAK,CAAC,CAAC,CAC7D,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}